<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√°m Ph√° Server-Sent Events (SSE)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; color: #1E293B; }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 350px; 
            max-height: 400px; 
        }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .tab-active { border-bottom: 2px solid #3B82F6; color: #1D4ED8; font-weight: 600; }
        .tab-inactive { color: #64748B; hover:text-gray-800; }
        .console-line { font-family: monospace; border-left: 3px solid #10B981; padding-left: 8px; margin-bottom: 4px; animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .flow-step { transition: all 0.5s ease; }
        .flow-active { background-color: #DBEAFE; border-color: #3B82F6; transform: scale(1.02); }
    </style>
    <!-- Chosen Palette: Slate (Background), Blue (Primary Action), Emerald (Success/Data), Indigo (Charts) -->
    <!-- Application Structure Plan:
         1. Header: Title and brief definition.
         2. Tab Navigation: Overview, Comparison, Simulation (The Core), Implementation.
         3. Overview Tab: Explains the "One-way" nature using simple flow blocks.
         4. Comparison Tab: Uses a Radar Chart to compare SSE, WebSockets, and Polling.
         5. Simulation Tab: The interactive "Wow" factor. Simulates a server connection, logs data, and updates a real-time Line Chart.
         6. Implementation Tab: Technical details on Headers and JS API.
         Designed to move from concept -> comparison -> practice -> code.
    -->
    <!-- Visualization & Content Choices:
         1. Concept: Flow diagram using HTML/CSS Flexbox. Goal: Show the persistent connection.
         2. Comparison: Chart.js Radar Chart. Goal: Compare abstract metrics (Latency, Battery, Ease of Use) visually.
         3. Simulation: Chart.js Line Chart + HTML Log. Goal: Demonstrate the "Stream" nature of SSE without a real backend.
         4. Content: Condensed from technical documentation into bite-sized cards.
         NO SVG used. NO Mermaid used. All icons are unicode or CSS shapes.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">SSE</div>
                    <div>
                        <h1 class="text-xl font-bold text-slate-900">Server-Sent Events</h1>
                        <p class="text-xs text-slate-500">C√¥ng ngh·ªá ƒë·∫©y d·ªØ li·ªáu th·ªùi gian th·ª±c</p>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <button onclick="switchTab('overview')" id="btn-overview" class="tab-active px-3 py-2 text-sm transition-colors">T·ªïng Quan</button>
                    <button onclick="switchTab('comparison')" id="btn-comparison" class="tab-inactive px-3 py-2 text-sm transition-colors">So S√°nh</button>
                    <button onclick="switchTab('simulation')" id="btn-simulation" class="tab-inactive px-3 py-2 text-sm transition-colors">M√¥ Ph·ªèng Live</button>
                    <button onclick="switchTab('implementation')" id="btn-implementation" class="tab-inactive px-3 py-2 text-sm transition-colors">Tri·ªÉn Khai</button>
                </nav>
            </div>
        </div>
        <!-- Mobile Nav -->
        <div class="md:hidden flex justify-around border-t border-slate-100 py-2 bg-slate-50">
            <button onclick="switchTab('overview')" class="text-xs font-semibold text-blue-600">T·ªïng Quan</button>
            <button onclick="switchTab('comparison')" class="text-xs font-medium text-slate-500">So S√°nh</button>
            <button onclick="switchTab('simulation')" class="text-xs font-medium text-slate-500">M√¥ Ph·ªèng</button>
            <button onclick="switchTab('implementation')" class="text-xs font-medium text-slate-500">Code</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- TAB: OVERVIEW -->
        <div id="tab-overview" class="block animate-fade-in">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">SSE l√† g√¨?</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    M·ª•c n√†y cung c·∫•p c√°i nh√¨n t·ªïng quan v·ªÅ c√¥ng ngh·ªá. 
                    Server-Sent Events (SSE) l√† m·ªôt ti√™u chu·∫©n web cho ph√©p m√°y ch·ªß ƒë·∫©y c√°c b·∫£n c·∫≠p nh·∫≠t th·ªùi gian th·ª±c ƒë·∫øn tr√¨nh duy·ªát web qua m·ªôt k·∫øt n·ªëi HTTP duy nh·∫•t v√† k√©o d√†i.
                    Kh√°c v·ªõi Polling (ph·∫£i h·ªèi li√™n t·ª•c), SSE thi·∫øt l·∫≠p m·ªôt k√™nh m·ªôt chi·ªÅu t·ª´ Server ƒë·∫øn Client.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <!-- Feature Card 1 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                    <div class="text-3xl mb-4">üì°</div>
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">Giao ti·∫øp M·ªôt Chi·ªÅu</h3>
                    <p class="text-sm text-slate-500">D·ªØ li·ªáu ch·ªâ ch·∫£y t·ª´ Server ƒë·∫øn Client. Client kh√¥ng g·ª≠i d·ªØ li·ªáu ng∆∞·ª£c l·∫°i qua c√πng m·ªôt k·∫øt n·ªëi n√†y (d√πng AJAX/Fetch ri√™ng).</p>
                </div>
                <!-- Feature Card 2 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                    <div class="text-3xl mb-4">üîå</div>
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">T·ª± ƒê·ªông K·∫øt N·ªëi L·∫°i</h3>
                    <p class="text-sm text-slate-500">Tr√¨nh duy·ªát t·ª± ƒë·ªông c·ªë g·∫Øng k·∫øt n·ªëi l·∫°i n·∫øu k·∫øt n·ªëi b·ªã r·ªõt. ƒê√¢y l√† t√≠nh nƒÉng m·∫∑c ƒë·ªãnh c·ª±c k·ª≥ m·∫°nh m·∫Ω c·ªßa SSE.</p>
                </div>
                <!-- Feature Card 3 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                    <div class="text-3xl mb-4">üìÑ</div>
                    <h3 class="text-lg font-semibold text-slate-800 mb-2">D·ª±a tr√™n Text (HTTP)</h3>
                    <p class="text-sm text-slate-500">S·ª≠ d·ª•ng giao th·ª©c HTTP chu·∫©n v√† ƒë·ªãnh d·∫°ng d·ªØ li·ªáu vƒÉn b·∫£n ƒë∆°n gi·∫£n, d·ªÖ d√†ng g·ª° l·ªói v√† kh√¥ng b·ªã ch·∫∑n b·ªüi t∆∞·ªùng l·ª≠a doanh nghi·ªáp.</p>
                </div>
            </div>

            <!-- Conceptual Flow Visualization -->
            <div class="bg-white rounded-xl shadow-lg border border-slate-200 p-8">
                <h3 class="text-lg font-bold text-slate-800 mb-6 border-b pb-2">Quy Tr√¨nh Ho·∫°t ƒê·ªông</h3>
                <div class="flex flex-col md:flex-row items-center justify-between gap-4 relative">
                    <!-- Client -->
                    <div class="flex-1 bg-slate-50 p-4 rounded-lg border border-slate-300 text-center z-10 w-full">
                        <div class="text-4xl mb-2">üíª</div>
                        <div class="font-bold text-slate-700">Client (Browser)</div>
                        <div class="text-xs text-slate-500 mt-2">new EventSource('/stream')</div>
                    </div>

                    <!-- Connection Line -->
                    <div class="hidden md:flex flex-1 h-1 bg-gray-200 relative items-center justify-center w-full">
                        <div class="absolute top-[-15px] bg-green-100 text-green-700 px-2 py-1 text-xs rounded-full border border-green-200 animate-pulse">
                            D·ªØ li·ªáu li√™n t·ª•c...
                        </div>
                        <div class="w-full flex justify-between px-2">
                            <span class="text-gray-400">‚óÑ</span>
                            <span class="text-gray-400">‚óÑ</span>
                            <span class="text-gray-400">‚óÑ</span>
                        </div>
                    </div>
                    <!-- Mobile vertical line -->
                    <div class="md:hidden w-1 h-16 bg-gray-200"></div>

                    <!-- Server -->
                    <div class="flex-1 bg-indigo-50 p-4 rounded-lg border border-indigo-200 text-center z-10 w-full">
                        <div class="text-4xl mb-2">üñ•Ô∏è</div>
                        <div class="font-bold text-indigo-700">Server</div>
                        <div class="text-xs text-slate-500 mt-2">Content-Type: text/event-stream</div>
                    </div>
                </div>
                <div class="mt-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200 text-sm text-yellow-800">
                    <strong>L∆∞u √Ω:</strong> K·∫øt n·ªëi v·∫´n m·ªü (Open) cho ƒë·∫øn khi Client ƒë√≥ng ho·∫∑c Server k·∫øt th√∫c. Kh√¥ng c·∫ßn b·∫Øt tay l·∫°i cho m·ªói tin nh·∫Øn.
                </div>
            </div>
        </div>

        <!-- TAB: COMPARISON -->
        <div id="tab-comparison" class="hidden animate-fade-in">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">So S√°nh C√¥ng Ngh·ªá</h2>
                <p class="text-slate-600">Ph·∫ßn n√†y gi√∫p b·∫°n quy·∫øt ƒë·ªãnh khi n√†o n√™n s·ª≠ d·ª•ng SSE so v·ªõi WebSockets hay Long Polling.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Radar Chart Section -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-semibold mb-4 text-center">Bi·ªÉu ƒê·ªì NƒÉng L·ª±c</h3>
                    <div class="chart-container">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                    <div class="mt-4 text-center text-sm text-slate-500">
                        <span class="inline-block w-3 h-3 bg-blue-500 rounded-full mr-1"></span> SSE
                        <span class="inline-block w-3 h-3 bg-pink-500 rounded-full mr-1 ml-4"></span> WebSockets
                    </div>
                </div>

                <!-- Comparison Table & Logic -->
                <div class="space-y-6">
                    <!-- Interactive Selector -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-lg font-semibold mb-4">B·∫£ng So S√°nh Chi Ti·∫øt</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-slate-600">
                                <thead class="text-xs text-slate-700 uppercase bg-slate-50">
                                    <tr>
                                        <th class="px-4 py-3">Ti√™u ch√≠</th>
                                        <th class="px-4 py-3 text-blue-600">SSE</th>
                                        <th class="px-4 py-3 text-pink-600">WebSockets</th>
                                        <th class="px-4 py-3 text-gray-500">Long Polling</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b">
                                        <td class="px-4 py-3 font-medium">H∆∞·ªõng d·ªØ li·ªáu</td>
                                        <td class="px-4 py-3">1 Chi·ªÅu (Server ‚Üí Client)</td>
                                        <td class="px-4 py-3">2 Chi·ªÅu (Full Duplex)</td>
                                        <td class="px-4 py-3">1 Chi·ªÅu (Gi·∫£ l·∫≠p)</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="px-4 py-3 font-medium">Giao th·ª©c</td>
                                        <td class="px-4 py-3">HTTP (Chu·∫©n)</td>
                                        <td class="px-4 py-3">TCP (Custom)</td>
                                        <td class="px-4 py-3">HTTP (Nhi·ªÅu requests)</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="px-4 py-3 font-medium">Reconnection</td>
                                        <td class="px-4 py-3 text-green-600 font-bold">T·ª± ƒë·ªông (Built-in)</td>
                                        <td class="px-4 py-3">C·∫ßn Code tay</td>
                                        <td class="px-4 py-3">Code tay</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="px-4 py-3 font-medium">T∆∞∆°ng th√≠ch Firewall</td>
                                        <td class="px-4 py-3 text-green-600 font-bold">D·ªÖ d√†ng (Port 80/443)</td>
                                        <td class="px-4 py-3">Kh√≥ khƒÉn (Proxy ch·∫∑n)</td>
                                        <td class="px-4 py-3">D·ªÖ d√†ng</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 font-medium">D·∫°ng d·ªØ li·ªáu</td>
                                        <td class="px-4 py-3">Text (UTF-8)</td>
                                        <td class="px-4 py-3">Binary & Text</td>
                                        <td class="px-4 py-3">B·∫•t k·ª≥</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Recommendation Box -->
                    <div class="bg-blue-50 p-5 rounded-lg border border-blue-200">
                        <h4 class="font-bold text-blue-800 mb-2">Khi n√†o ch·ªçn SSE?</h4>
                        <ul class="list-disc list-inside text-sm text-blue-700 space-y-1">
                            <li>C·∫≠p nh·∫≠t tin t·ª©c (News feeds).</li>
                            <li>B·∫£ng gi√° ch·ª©ng kho√°n/crypto (ch·ªâ xem).</li>
                            <li>Th√¥ng b√°o h·ªá th·ªëng (Notifications).</li>
                            <li>Theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng.</li>
                            <li>Khi kh√¥ng c·∫ßn g·ª≠i d·ªØ li·ªáu ph·ª©c t·∫°p t·ª´ Client l√™n Server.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: SIMULATION (THE PLAYGROUND) -->
        <div id="tab-simulation" class="hidden animate-fade-in">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">M√¥ Ph·ªèng Tr·ª±c Ti·∫øp</h2>
                <p class="text-slate-600">
                    Tr·∫£i nghi·ªám c√°ch SSE ho·∫°t ƒë·ªông ngay t·∫°i ƒë√¢y. 
                    B√™n d∆∞·ªõi l√† tr√¨nh m√¥ ph·ªèng Client k·∫øt n·ªëi t·ªõi m·ªôt "Server ·∫£o". 
                    Server s·∫Ω ƒë·∫©y d·ªØ li·ªáu ng·∫´u nhi√™n v·ªÅ bi·ªÉu ƒë·ªì v√† log.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Controls & Log -->
                <div class="bg-slate-900 rounded-xl shadow-lg p-4 text-slate-200 flex flex-col h-[500px]">
                    <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-4">
                        <h3 class="font-mono font-bold text-green-400"> >_ Client Console</h3>
                        <div id="connection-status" class="text-xs px-2 py-1 bg-red-900 text-red-200 rounded-full uppercase tracking-wider font-bold">Disconnected</div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex gap-2 mb-4">
                        <button id="btn-start" class="flex-1 bg-green-600 hover:bg-green-700 text-white text-xs font-bold py-2 px-4 rounded transition">
                            ‚ñ∂ K·∫æT N·ªêI
                        </button>
                        <button id="btn-stop" class="flex-1 bg-red-600 hover:bg-red-700 text-white text-xs font-bold py-2 px-4 rounded transition opacity-50 cursor-not-allowed" disabled>
                            ‚èπ NG·∫ÆT
                        </button>
                        <button id="btn-clear" class="bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold py-2 px-3 rounded transition">
                            üóëÔ∏è
                        </button>
                    </div>

                    <!-- Log Output -->
                    <div id="console-output" class="flex-grow overflow-y-auto font-mono text-xs bg-black/30 p-2 rounded border border-slate-700 space-y-1">
                        <div class="text-slate-500 italic">// Nh·∫•n 'K·∫øt n·ªëi' ƒë·ªÉ b·∫Øt ƒë·∫ßu nh·∫≠n s·ª± ki·ªán...</div>
                    </div>
                </div>

                <!-- Real-time Visualization -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Chart Card -->
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-slate-800">D·ªØ Li·ªáu Th·ªùi Gian Th·ª±c (Mock Server)</h3>
                            <span class="text-xs font-mono bg-slate-100 px-2 py-1 rounded text-slate-500">Channel: stock_updates</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="simulationChart"></canvas>
                        </div>
                    </div>

                    <!-- Explainer for Simulation -->
                    <div class="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded-r-lg">
                        <h4 class="font-bold text-indigo-800 text-sm">ƒêi·ªÅu g√¨ ƒëang x·∫£y ra?</h4>
                        <p class="text-sm text-indigo-700 mt-1">
                            Trong m√¥i tr∆∞·ªùng th·ª±c t·∫ø, tr√¨nh duy·ªát s·∫Ω d√πng <code>new EventSource('/url')</code>. 
                            ·ªû ƒë√¢y, ch√∫ng ta d√πng Javascript <code>setInterval</code> ƒë·ªÉ gi·∫£ l·∫≠p server ƒë·∫©y d·ªØ li·ªáu JSON v·ªÅ. 
                            M·ªói d√≤ng trong Console t∆∞∆°ng ·ª©ng v·ªõi m·ªôt s·ª± ki·ªán <code>message</code> ƒë∆∞·ª£c b·∫Øn ra.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB: IMPLEMENTATION -->
        <div id="tab-implementation" class="hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">H∆∞·ªõng D·∫´n Tri·ªÉn Khai</h2>
                <p class="text-slate-600">Chi ti·∫øt k·ªπ thu·∫≠t ƒë·ªÉ x√¢y d·ª±ng ·ª©ng d·ª•ng SSE.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Server Side -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="bg-slate-100 px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                        <h3 class="font-bold text-slate-700">1. Server Side (HTTP)</h3>
                        <span class="text-xs bg-slate-200 px-2 py-1 rounded">Quan tr·ªçng</span>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-sm text-slate-600">Server ph·∫£i tr·∫£ v·ªÅ c√°c Headers c·ª• th·ªÉ ƒë·ªÉ tr√¨nh duy·ªát hi·ªÉu ƒë√¢y l√† m·ªôt Stream.</p>
                        
                        <div class="bg-slate-900 rounded-lg p-4 overflow-x-auto">
                            <code class="text-sm font-mono text-green-400">
                                <span class="text-purple-400">Content-Type:</span> text/event-stream<br>
                                <span class="text-purple-400">Cache-Control:</span> no-cache<br>
                                <span class="text-purple-400">Connection:</span> keep-alive
                            </code>
                        </div>

                        <div class="mt-4">
                            <p class="text-sm font-semibold mb-2">ƒê·ªãnh d·∫°ng tin nh·∫Øn:</p>
                            <div class="bg-slate-50 border border-slate-200 rounded p-3 text-sm font-mono text-slate-700">
                                id: 12345<br>
                                event: updatePrice<br>
                                data: {"symbol": "AAPL", "price": 150.2}<br>
                                <br>
                                <span class="text-slate-400">// D√≤ng tr·ªëng ƒë·ªÉ k·∫øt th√∫c event</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Client Side -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="bg-indigo-50 px-6 py-4 border-b border-indigo-100 flex justify-between items-center">
                        <h3 class="font-bold text-indigo-800">2. Client Side (JavaScript)</h3>
                        <span class="text-xs bg-indigo-200 text-indigo-800 px-2 py-1 rounded">API Chu·∫©n</span>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-sm text-slate-600">Browser h·ªó tr·ª£ API <code>EventSource</code> t√≠ch h·ª£p s·∫µn. R·∫•t d·ªÖ s·ª≠ d·ª•ng.</p>
                        
                        <div class="bg-slate-900 rounded-lg p-4 overflow-x-auto">
                            <pre class="text-sm font-mono text-slate-300">
<span class="text-pink-400">const</span> evtSource = <span class="text-pink-400">new</span> EventSource(<span class="text-yellow-300">"/api/stream"</span>);

<span class="text-slate-500">// L·∫Øng nghe tin nh·∫Øn m·∫∑c ƒë·ªãnh</span>
evtSource.<span class="text-blue-400">onmessage</span> = <span class="text-pink-400">function</span>(event) {
  <span class="text-yellow-300">console</span>.log(<span class="text-green-300">"New data:"</span>, event.data);
};

<span class="text-slate-500">// L·∫Øng nghe event c·ª• th·ªÉ (vd: updatePrice)</span>
evtSource.<span class="text-blue-400">addEventListener</span>(<span class="text-yellow-300">"updatePrice"</span>, (e) => {
   <span class="text-pink-400">const</span> data = JSON.parse(e.data);
   updateUI(data);
});
                            </pre>
                        </div>
                        <div class="bg-red-50 p-3 rounded border border-red-100 text-xs text-red-700">
                            <strong>L∆∞u √Ω:</strong> EventSource kh√¥ng h·ªó tr·ª£ g·ª≠i custom headers (nh∆∞ Authorization Bearer) m·∫∑c ƒë·ªãnh. C·∫ßn d√πng th∆∞ vi·ªán polyfill ho·∫∑c g·ª≠i token qua URL query params.
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-400 py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center text-sm">
            <p>¬© 2024 Server-Sent Events Explorer. ƒê∆∞·ª£c t·∫°o ra ƒë·ªÉ h·ªó tr·ª£ vi·ªác h·ªçc t·∫≠p c√¥ng ngh·ªá Real-time.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- 1. STATE MANAGEMENT & NAVIGATION ---
        let currentTab = 'overview';
        let simulationInterval = null;
        let chartInstance = null;
        let radarChartInstance = null;
        const mockDataBuffer = [];
        
        // Navigation Logic
        function switchTab(tabId) {
            // Hide all tabs
            ['overview', 'comparison', 'simulation', 'implementation'].forEach(id => {
                document.getElementById(`tab-${id}`).classList.add('hidden');
                const btn = document.getElementById(`btn-${id}`);
                if(btn) {
                    btn.classList.remove('tab-active');
                    btn.classList.add('tab-inactive');
                }
            });

            // Show selected tab
            document.getElementById(`tab-${tabId}`).classList.remove('hidden');
            const activeBtn = document.getElementById(`btn-${tabId}`);
            if(activeBtn) {
                activeBtn.classList.remove('tab-inactive');
                activeBtn.classList.add('tab-active');
            }

            // Init charts if needed
            if (tabId === 'comparison' && !radarChartInstance) initRadarChart();
            if (tabId === 'simulation' && !chartInstance) initSimulationChart();
        }

        // --- 2. COMPARISON RADAR CHART ---
        function initRadarChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['D·ªÖ tri·ªÉn khai', 'Hi·ªáu su·∫•t Pin', 'T∆∞∆°ng th√≠ch Firewall', 'Giao ti·∫øp 2 chi·ªÅu', 'X·ª≠ l√Ω d·ªØ li·ªáu Binary'],
                    datasets: [{
                        label: 'SSE',
                        data: [90, 85, 95, 0, 10], // SSE scores
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgb(59, 130, 246)',
                        pointBackgroundColor: 'rgb(59, 130, 246)',
                    }, {
                        label: 'WebSockets',
                        data: [40, 60, 50, 100, 100], // WS scores
                        fill: true,
                        backgroundColor: 'rgba(236, 72, 153, 0.2)',
                        borderColor: 'rgb(236, 72, 153)',
                        pointBackgroundColor: 'rgb(236, 72, 153)',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#e2e8f0' },
                            grid: { color: '#e2e8f0' },
                            pointLabels: { font: { size: 12, family: 'Inter' } },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { position: 'top' }
                    }
                }
            });
        }

        // --- 3. SIMULATION LOGIC ---
        function initSimulationChart() {
            const ctx = document.getElementById('simulationChart').getContext('2d');
            
            // Initial Empty Data
            const initialLabels = Array(20).fill('');
            const initialData = Array(20).fill(null);

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: initialLabels,
                    datasets: [{
                        label: 'Gi√° tr·ªã (Mock Data)',
                        data: initialData,
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: { duration: 0 }, // Disable animation for pure real-time feel
                    scales: {
                        x: { display: false },
                        y: { 
                            beginAtZero: false,
                            grid: { borderDash: [2, 4], color: '#f1f5f9' }
                        }
                    },
                    plugins: {
                        tooltip: { enabled: true, intersect: false, mode: 'index' }
                    }
                }
            });
        }

        // Mock Server Simulation
        const btnStart = document.getElementById('btn-start');
        const btnStop = document.getElementById('btn-stop');
        const btnClear = document.getElementById('btn-clear');
        const consoleOutput = document.getElementById('console-output');
        const statusBadge = document.getElementById('connection-status');

        let currentValue = 50;

        btnStart.addEventListener('click', () => {
            if (simulationInterval) return;

            // Update UI
            statusBadge.textContent = "CONNECTED (STREAMING)";
            statusBadge.classList.replace('bg-red-900', 'bg-green-900');
            statusBadge.classList.replace('text-red-200', 'text-green-200');
            btnStart.disabled = true;
            btnStart.classList.add('opacity-50', 'cursor-not-allowed');
            btnStop.disabled = false;
            btnStop.classList.remove('opacity-50', 'cursor-not-allowed');

            logToConsole('system', 'ƒêang thi·∫øt l·∫≠p k·∫øt n·ªëi t·ªõi /stream...');
            setTimeout(() => {
                logToConsole('system', 'K·∫øt n·ªëi th√†nh c√¥ng! Tr·∫°ng th√°i: OPEN (1)');
                
                // Start Interval mimicking Server Push
                simulationInterval = setInterval(() => {
                    const randomChange = (Math.random() - 0.5) * 10;
                    currentValue = Math.max(10, Math.min(100, currentValue + randomChange));
                    const payload = {
                        id: Date.now(),
                        timestamp: new Date().toLocaleTimeString(),
                        value: parseFloat(currentValue.toFixed(2)),
                        type: 'update'
                    };

                    // Update UI components
                    updateChart(payload.value);
                    logToConsole('data', JSON.stringify(payload));
                }, 1000); // 1 second update rate

            }, 800);
        });

        btnStop.addEventListener('click', () => {
            if (!simulationInterval) return;

            clearInterval(simulationInterval);
            simulationInterval = null;

            // Update UI
            statusBadge.textContent = "DISCONNECTED";
            statusBadge.classList.replace('bg-green-900', 'bg-red-900');
            statusBadge.classList.replace('text-green-200', 'text-red-200');
            
            btnStart.disabled = false;
            btnStart.classList.remove('opacity-50', 'cursor-not-allowed');
            btnStop.disabled = true;
            btnStop.classList.add('opacity-50', 'cursor-not-allowed');

            logToConsole('error', 'K·∫øt n·ªëi ƒë√£ b·ªã ng·∫Øt b·ªüi ng∆∞·ªùi d√πng.');
        });

        btnClear.addEventListener('click', () => {
            consoleOutput.innerHTML = '<div class="text-slate-500 italic">// Console ƒë√£ ƒë∆∞·ª£c x√≥a</div>';
        });

        function logToConsole(type, message) {
            const line = document.createElement('div');
            line.className = 'console-line text-xs break-all';
            
            const time = new Date().toLocaleTimeString();

            if (type === 'data') {
                line.style.borderLeftColor = '#10B981'; // Green
                line.innerHTML = `<span class="text-slate-400">[${time}]</span> <span class="text-blue-400">event: message</span> <br> <span class="text-slate-300">data: ${message}</span>`;
            } else if (type === 'error') {
                line.style.borderLeftColor = '#EF4444'; // Red
                line.innerHTML = `<span class="text-slate-400">[${time}]</span> <span class="text-red-400">${message}</span>`;
            } else {
                line.style.borderLeftColor = '#F59E0B'; // Yellow
                line.innerHTML = `<span class="text-slate-400">[${time}]</span> <span class="text-yellow-400">${message}</span>`;
            }

            consoleOutput.appendChild(line);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        function updateChart(newValue) {
            if (!chartInstance) return;

            const data = chartInstance.data.datasets[0].data;
            const labels = chartInstance.data.labels;

            // Shift data
            data.push(newValue);
            labels.push('');
            
            if (data.length > 20) {
                data.shift();
                labels.shift();
            }

            chartInstance.update();
        }

        // Initialize default tab logic
        // Only run chart init if tab is visible, but since we default to overview, we wait.
        
    </script>
</body>
</html>